{"version":3,"sources":["webpack:///./src/views/NewsInfo.vue","webpack:///./src/views/NewsInfo.vue?ac94","webpack:///./src/assets/images/collects.png","webpack:///./src/views/NewsInfo.vue?bacf","webpack:///./src/assets/images/likes1.png","webpack:///./src/assets/images/likes.png","webpack:///./src/assets/images/collects1.png"],"names":["store","useStore","router","useRouter","route","useRoute","getCurrentInstance","proxy","data","reactive","id","params","news_content","content","editor","islike","iscollection","isFixed","cate","onClickLeft","go","getNewsInfo","reg","user_name","state","user","username","flag","axios","get","then","res","successData","status","split","likes","collections","Toast","sendInfo","val","news_id","action_time","Date","now","action_type","post","iflike","commit","type","num","ifcollection","__exports__","module","exports"],"mappings":"6qBAwCE,IAAMA,EAAQC,iBAERC,EAASC,iBACTC,EAAQC,iBACd,EAAkBC,iBAAVC,EAAR,EAAQA,MAEFC,EAAOC,eAAS,CAEpBC,GAAIN,EAAMO,OAAOD,GACjBE,aAAc,GACdC,QAAS,GACTC,OAAQ,GACRC,QAAQ,EACRC,cAAc,EACdC,SAAS,EACTC,KAAMd,EAAMO,OAAOO,OAIrB,SAASC,IACPjB,EAAOkB,IAAI,G,SAIEC,I,6FAAf,2GACMC,EAAM,OACNC,EAAYvB,EAAMwB,MAAMC,KAAKC,UAG9B1B,EAAMwB,MAAMG,KALjB,gCAMwBpB,EAAMqB,MAAMC,IAAI,+BAAiCrB,EAAKE,GAAK,cAAgBa,GAAWO,MAAK,SAAAC,GAC7G,OAAOA,KAPb,OAMIC,EANJ,+CAUwBzB,EAAMqB,MAAMC,IAAI,qBAAuBrB,EAAKE,GAAK,cAAgBa,GAAWO,MAAK,SAAAC,GACnG,OAAOA,KAXb,QAUIC,EAVJ,eAe6B,MAAvBA,EAAYC,QACdzB,EAAKI,aAAeoB,EAAYxB,KAAKA,KACrCA,EAAKK,QAAUL,EAAKI,aAAaC,QAAQqB,MAAMZ,GAAK,GACpDd,EAAKM,OAAS,QAAUN,EAAKI,aAAaC,QAAQqB,MAAMZ,GAAK,GAC1B,GAA/BU,EAAYxB,KAAKA,KAAK2B,MACxB3B,EAAKO,QAAS,EAEdP,EAAKO,QAAS,EAEyB,GAArCiB,EAAYxB,KAAKA,KAAK4B,YACxB5B,EAAKQ,cAAe,EAEpBR,EAAKQ,cAAe,GAGtBqB,eAAM,UA9BV,4C,iCAmCeC,I,6FAAf,yGACMC,EAAM,CACRhB,UAAWvB,EAAMwB,MAAMC,KAAKC,SAC5Bc,QAAShC,EAAKE,GACd+B,YAAaC,KAAKC,MAClBC,YAAa,SAIZ5C,EAAMwB,MAAMG,KATjB,gCAUwBpB,EAAMqB,MAAMiB,KAAK,iBAAkBN,GAAKT,MAAK,SAAAC,GAC/D,OAAOA,KAXb,OAUIC,EAVJ,8CAcwBzB,EAAMqB,MAAMiB,KAAK,UAAWN,GAAKT,MAAK,SAAAC,GACxD,OAAOA,KAfb,OAcIC,EAdJ,eAmB6B,MAAvBA,EAAYC,QACdI,eAAM,UApBV,4C,iCAyBeS,I,6FAAf,yGACEtC,EAAKO,QAAUP,EAAKO,OAEF,GAAfP,EAAKO,OACJf,EAAM+C,OAAO,eAAgB,CAACC,KAAK,QAAQtC,GAAGF,EAAKE,GAAGuC,IAAI,IAE1DjD,EAAM+C,OAAO,eAAgB,CAACC,KAAK,QAAQtC,GAAGF,EAAKE,GAAGuC,KAAK,IAE3DV,EAAM,CACRhB,UAAWvB,EAAMwB,MAAMC,KAAKC,SAC5Bc,QAAShC,EAAKE,GACd+B,YAAaC,KAAKC,MAClBC,YAAa,SAAF,OAAWpC,EAAKO,UAI1Bf,EAAMwB,MAAMG,KAhBjB,gCAiBwBpB,EAAMqB,MAAMiB,KAAK,iBAAkBN,GAAKT,MAAK,SAAAC,GAC/D,OAAOA,KAlBb,OAiBIC,EAjBJ,+CAqBwBzB,EAAMqB,MAAMiB,KAAK,UAAWN,GAAKT,MAAK,SAAAC,GACxD,OAAOA,KAtBb,QAqBIC,EArBJ,eA0B6B,MAAvBA,EAAYC,QACdI,eAAM,UA3BV,4C,iCAgCea,I,6FAAf,yGACE1C,EAAKQ,cAAgBR,EAAKQ,aACF,GAArBR,EAAKQ,aACJhB,EAAM+C,OAAO,eAAgB,CAACC,KAAK,cAActC,GAAGF,EAAKE,GAAGuC,IAAI,IAEhEjD,EAAM+C,OAAO,eAAgB,CAACC,KAAK,cAActC,GAAGF,EAAKE,GAAGuC,KAAK,IAEjEV,EAAM,CACRhB,UAAWvB,EAAMwB,MAAMC,KAAKC,SAC5Bc,QAAShC,EAAKE,GACd+B,YAAaC,KAAKC,MAClBC,YAAa,eAAF,OAAiBpC,EAAKQ,gBAIhChB,EAAMwB,MAAMG,KAfjB,gCAgBwBpB,EAAMqB,MAAMiB,KAAK,iBAAkBN,GAAKT,MAAK,SAAAC,GAC/D,OAAOA,KAjBb,OAgBIC,EAhBJ,+CAoBwBzB,EAAMqB,MAAMiB,KAAK,UAAWN,GAAKT,MAAK,SAAAC,GACxD,OAAOA,KArBb,QAoBIC,EApBJ,eAyB6B,MAAvBA,EAAYC,QACdI,eAAM,UA1BV,4C,+BAgCEhB,IACAiB,I,ixCCvLJ,MAAMa,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,gB,4CCRfC,EAAOC,QAAU,0c,kCCAjB,W,mBCAAD,EAAOC,QAAU,siB,mBCAjBD,EAAOC,QAAU,8b,mBCAjBD,EAAOC,QAAU","file":"js/chunk-5c8aeb2f.8e6f269f.js","sourcesContent":["<template>\r\n  <div>\r\n    <van-nav-bar left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" :fixed='data.isFixed' />\r\n    <div class=\"newsinfo-continer\">\r\n      <div class=\"newsTitle\">\r\n        <!--大标题-->\r\n        <h1>{{ data.news_content.title }}</h1>\r\n        <!--子标题-->\r\n        <p>\r\n          <span>发布时间：{{ data.news_content.ctime}}</span>\r\n          <span>标签：{{data.cate}}</span>\r\n        </p>\r\n        <hr>\r\n      </div>\r\n\r\n      <!--内容区域-->\r\n      <div class=\"content\" v-html=\"data.content\"></div>\r\n      <div class=\"editor\" v-html=\"data.editor\"></div>\r\n\r\n      <div id=\"action\">\r\n        <span>喜欢:\r\n          <img src=\"../assets/images/likes.png\" alt=\"\" v-show=\"!data.islike\" @click=\"iflike\">\r\n          <img src=\"../assets/images/likes1.png\" alt=\"\" v-show=\"data.islike\" @click=\"iflike\">\r\n        </span>\r\n        <span>收藏:\r\n          <img src=\"../assets/images/collects.png\" alt=\"\" v-show=\"!data.iscollection\" @click=\"ifcollection\">\r\n          <img src=\"../assets/images/collects1.png\" alt=\"\" v-show=\"data.iscollection\" @click=\"ifcollection\">\r\n        </span>\r\n      </div>\r\n\r\n    </div>\r\n    <div class=\"blank\"></div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script setup>\r\n  import { Toast } from 'vant'\r\n  import {  reactive, getCurrentInstance } from \"vue\";\r\n  import { useStore } from \"vuex\";\r\n  const store = useStore();\r\n  import { useRouter, useRoute  } from \"vue-router\";\r\n  const router = useRouter();\r\n  const route = useRoute();\r\n  const { proxy } = getCurrentInstance();\r\n\r\n  const data = reactive({\r\n    // 获取路由地址的id,根据这个id来展示不同的数据。\r\n    id: route.params.id,\r\n    news_content: [],\r\n    content: '',\r\n    editor: '',\r\n    islike: false,\r\n    iscollection: false,\r\n    isFixed: true,\r\n    cate: route.params.cate\r\n  });\r\n\r\n  // 返回上一页\r\n  function onClickLeft() {\r\n    router.go(-1);\r\n  }\r\n\r\n  // 获取新闻详情\r\n  async function getNewsInfo() {\r\n    let reg = /责任编辑/;\r\n    let user_name = store.state.user.username;\r\n\r\n    let successData\r\n    if(store.state.flag){\r\n      successData = await proxy.axios.get(\"/recsys/news_detail?news_id=\" + data.id + '&user_name=' + user_name).then(res => {\r\n        return res\r\n      })\r\n    }else {\r\n      successData = await proxy.axios.get(\"/newsInfo?news_id=\" + data.id + '&user_name=' + user_name).then(res => {\r\n        return res\r\n      })\r\n    }\r\n\r\n    if (successData.status === 200) {\r\n      data.news_content = successData.data.data\r\n      data.content = data.news_content.content.split(reg)[0]\r\n      data.editor = '责任编辑:' + data.news_content.content.split(reg)[1]\r\n      if (successData.data.data.likes == true) {\r\n        data.islike = true\r\n      } else {\r\n        data.islike = false\r\n      }\r\n      if (successData.data.data.collections == true) {\r\n        data.iscollection = true\r\n      } else {\r\n        data.iscollection = false\r\n      }\r\n    } else {\r\n      Toast('加载数据失败')\r\n    }\r\n  }\r\n\r\n  // 发送action为read的请求\r\n  async function sendInfo() {\r\n    var val = {\r\n      user_name: store.state.user.username,\r\n      news_id: data.id,\r\n      action_time: Date.now(),\r\n      action_type: 'read',\r\n    }\r\n\r\n    let successData\r\n    if(store.state.flag){\r\n      successData = await proxy.axios.post(\"/recsys/action\", val).then(res => {\r\n        return res\r\n      })\r\n    }else {\r\n      successData = await proxy.axios.post(\"/action\", val).then(res => {\r\n        return res\r\n      })\r\n    }\r\n\r\n    if (successData.status !== 200) {\r\n      Toast('加载数据失败')\r\n    }\r\n  }\r\n\r\n  // 点击喜欢时发送请求\r\n  async function iflike() {\r\n    data.islike = !data.islike\r\n    // 调用store中的actionChange函数控制次数的变化\r\n    if(data.islike == true){\r\n        store.commit('actionChange', {type:'likes',id:data.id,num:1})\r\n      }else{\r\n        store.commit('actionChange', {type:'likes',id:data.id,num:-1})\r\n      }\r\n    var val = {\r\n      user_name: store.state.user.username,\r\n      news_id: data.id,\r\n      action_time: Date.now(),\r\n      action_type: `likes:${data.islike}`,\r\n    }\r\n\r\n    let successData\r\n    if(store.state.flag){\r\n      successData = await proxy.axios.post(\"/recsys/action\", val).then(res => {\r\n        return res\r\n      })\r\n    }else {\r\n      successData = await proxy.axios.post(\"/action\", val).then(res => {\r\n        return res\r\n      })\r\n    }\r\n\r\n    if (successData.status !== 200) {\r\n      Toast('加载数据失败')\r\n    }\r\n  }\r\n\r\n  // 点击收藏时发送请求\r\n  async function ifcollection() {\r\n    data.iscollection = !data.iscollection\r\n    if(data.iscollection == true){\r\n        store.commit('actionChange', {type:'collections',id:data.id,num:1})\r\n      }else{\r\n        store.commit('actionChange', {type:'collections',id:data.id,num:-1})\r\n      }\r\n    var val = {\r\n      user_name: store.state.user.username,\r\n      news_id: data.id,\r\n      action_time: Date.now(),\r\n      action_type: `collections:${data.iscollection}`,\r\n    }\r\n\r\n    let successData\r\n    if(store.state.flag){\r\n      successData = await proxy.axios.post(\"/recsys/action\", val).then(res => {\r\n        return res\r\n      })\r\n    }else {\r\n      successData = await proxy.axios.post(\"/action\", val).then(res => {\r\n        return res\r\n      })\r\n    }\r\n\r\n    if (successData.status !== 200) {\r\n      Toast('加载数据失败')\r\n    }\r\n  }\r\n  \r\n\r\n    // 创建页面时调用函数\r\n    getNewsInfo()\r\n    sendInfo()\r\n\r\n  \r\n</script>\r\n\r\n<style scoped>\r\n    /* 标题 */\r\n  .newsTitle {\r\n    padding: 1.5rem .5rem 0 .5rem;\r\n  }\r\n\r\n  /* 大标题 */\r\n  .newsTitle h1 {\r\n    text-align: center;\r\n    color: rgb(77,79,83);;\r\n    font-weight: 600;\r\n    padding: 20px 0 10px 0;\r\n    margin: 0;\r\n    font-size: .6rem;\r\n  }\r\n\r\n  /* 副标题 */\r\n  .newsTitle p {\r\n    font-size: .3rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding-top: 1rem;\r\n    padding-bottom: 1rem;\r\n    color: #4679e3;\r\n  }\r\n\r\n  /* 内容 距离底部padding 遮挡action */\r\n  .newsinfo-continer{\r\n    padding-bottom: 5rem;\r\n    background-color: white;\r\n  }\r\n\r\n  /* 具体内容 */\r\n  .content {\r\n    font-size: .35rem;\r\n    padding: 0 20px 20px 20px;\r\n    text-indent: 2em;\r\n    line-height: .7rem;\r\n    /* 首行文本缩进 */\r\n    color: rgb(28 27 29);\r\n}\r\n\r\n  /* 责任编辑 */\r\n  .editor {\r\n    font-size: .3rem;\r\n    padding: 0 20px 0 20px;\r\n    line-height: 2.2rem;\r\n    text-align: end;\r\n  }\r\n\r\n  #action {\r\n    /* margin: 20px 0 20px 0; */\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n  }\r\n\r\n  #action>span {\r\n    display: flex;\r\n    padding-top: 2rem;\r\n    padding-bottom: 2rem;\r\n    font-size: .3rem;\r\n  }\r\n\r\n  .blank {\r\n    width: 100vw;\r\n    height: 50px;\r\n    position: fixed;\r\n    bottom: 0;\r\n    background-color: white;\r\n  }\r\n</style>","import script from \"./NewsInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NewsInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./NewsInfo.vue?vue&type=style&index=0&id=0d8cc232&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\wcy\\\\Github\\\\fun-rec\\\\codes\\\\news_recsys\\\\news_rec_web\\\\vue3-fun-rec2\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0d8cc232\"]])\n\nexport default __exports__","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAP1JREFUOE+l078rxVEYx/HXHUQimRhloe7CX0BJKYPRqvgD/AeYrt0fYDGw2pQQRWZmuyL5kdh0buerb8f53u/tesZzPs+7z/N5zmn4ZzW66B/EZ5WuDrCGcez2CnhGP4Z6AUxgCt/RxWEO0mmELwzEpncMdwLM4SIR7GA7ns3jPLlfwXHZQRPXGKnZTBhpGadBl44QEr/HNJ4yoA8s4qa4y2XQF5tTJxu4xV0ZnAOEh7OOvcTBGGZwUgcIwR3ELC6jeAlXeEQA/VbOwRtaeMBRVC6ExLEVnYUg25UCZnGGSbxkQnzFJvarAMF+sfuqba6WnP1x0MXnbEtGC4c/ijMoETLh35MAAAAASUVORK5CYII=\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./NewsInfo.vue?vue&type=style&index=0&id=0d8cc232&scoped=true&lang=css\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAUNJREFUOE+tkz1Lw2AQx/+nTbIKOqltdDEJ4iCCH0EcVPQb+AJ+AqFFFx2Uip9B7e7QQRD6FQTpJGlczAs4uQgO9gnNSV4aYltKSr3tOf73u7vn7ghjGo0Zjz6AOacsgTqzwSR9LTt+M0xgzssrQDCNQsE27B87mzQFvJWUrQB8DGA7EXwTc7kD+pgg3AOYCv0E1ED0oDntp+Qdy1sl+R3AQs6WbN0ViynALEr7RBRmyW3MfGB4fi1qoaXKdTB2c0fHwkfdFTsRwFSVE2K+GQXAwIXhivMYUFQ2iLgxEoBp0/DajXQKlipfMuM0D4QYZ5onrv5MIfmLWzAOh0IId7ojjrqavkWyVHmPGRUA6z2gZyJUNUfUBy5S1slrkKxPuQJGOfITrrUZUaUX+L3VDb2FV1VaDQO6Kz2otf8/pjxTyGp+AbxdYRG/DL2FAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAPNJREFUOE+l078uBFEUx/HPSrYksgqJB1BIiNWLTqXxBsJLKKg0yn0EnkCnFRGJDgWdRC/EvwaJyJ2ckZuxmxmZSW5x7j2/7/k7HS2/Tku9YYBZzOAFlxFgHlO4j/MbNwes4RDL+MANvuOMYTFUp9jCcbJzwCsmKiWVoqvK/RvGc8AGznDXsCcLWMJBmcFj1NhQX7g9oVcCCuM/ajxjsgR8RpNuG0LmcI1u3sQHrKAOksQnmK5OIdnv2MFgRCZpfOmtmMAwQLpbj31YxUX4pajn2MRRDh+1yl1sYzec97CPr2pmdf9CPwTlSv+prA5QO5TWgB95ZCYRYtRekQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAWtJREFUOE9jZKAQMBLS/+yZMZeU1NlvuNThNeDTK+0EJob/Ejxi1zrIMuDrK+1jDAwMEtxiV5VINuD9cw0FVmam+yCN/xkZI3lFr67AZghOL3x5qdnHwMhYCNV0nkfsmhFOAz4/17BnZGY6QChAkeUZGRn9uUWvboK74PNbLW2GvwwbGRkYlAkY9JHh//8QHvHre0DqULzw5ZW2BMP//0sYGBmcsRryn+ERE8u/CC7hG8dh8hhh8P+MMetXue8nGRgYDDEM+fdPj0fixmUUr6ArAiUcPpbvX7G7gNGDR/zqTrwGfH6p1cDIyFAP9h8j49x///79ZGRkzAJrYmRYxiN6LRqvAV9eaZ0DOf8/w/8IXrHrK0GKv7/Rcv779/9yBkZGUW7RXxyMjHd+Yg2Dr6+0QP6exMXG7McocPk9uje+vtGa+/8fwxEesWvzsRoAcj6v+LUGfNH47ZVmOBfUZRjRSGxC+v9BVxDmQgBmHnIR9LsLbgAAAABJRU5ErkJggg==\""],"sourceRoot":""}