{"ast":null,"code":"import React, { createRef, forwardRef, useEffect, useImperativeHandle, useState } from 'react';\nimport { resolveContainer } from '../../utils/get-container';\nimport ReactDOM from 'react-dom';\nimport { InternalToast } from './toast';\nimport { mergeProps } from '../../utils/with-default-props';\nconst containers = [];\n\nfunction unmount(container) {\n  const unmountResult = ReactDOM.unmountComponentAtNode(container);\n\n  if (unmountResult && container.parentNode) {\n    container.parentNode.removeChild(container);\n  }\n}\n\nconst defaultProps = {\n  duration: 2000,\n  position: 'center',\n  maskClickable: true\n};\nexport function show(p) {\n  const props = mergeProps(defaultProps, typeof p === 'string' ? {\n    content: p\n  } : p);\n  let timer = 0;\n  const {\n    getContainer = () => document.body\n  } = props;\n  const container = document.createElement('div');\n  const bodyContainer = resolveContainer(getContainer);\n  bodyContainer.appendChild(container);\n  clear();\n  containers.push(container);\n  const TempToast = forwardRef((_, ref) => {\n    const [visible, setVisible] = useState(true);\n    useEffect(() => {\n      return () => {\n        var _a;\n\n        (_a = props.afterClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      };\n    }, []);\n    useEffect(() => {\n      if (props.duration === 0) {\n        return;\n      }\n\n      timer = window.setTimeout(() => {\n        setVisible(false);\n      }, props.duration);\n      return () => {\n        window.clearTimeout(timer);\n      };\n    }, []);\n    useImperativeHandle(ref, () => ({\n      close: () => setVisible(false)\n    }));\n    return React.createElement(InternalToast, Object.assign({}, props, {\n      getContainer: () => container,\n      visible: visible,\n      afterClose: () => {\n        unmount(container);\n      }\n    }));\n  });\n  const ref = createRef();\n  ReactDOM.render(React.createElement(TempToast, {\n    ref: ref\n  }), container);\n  return {\n    close: () => {\n      var _a;\n\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.close();\n    }\n  };\n}\nexport function clear() {\n  while (true) {\n    const container = containers.pop();\n    if (!container) break;\n    unmount(container);\n  }\n}\nexport function config(val) {\n  if (val.duration !== undefined) {\n    defaultProps.duration = val.duration;\n  }\n\n  if (val.position !== undefined) {\n    defaultProps.position = val.position;\n  }\n\n  if (val.maskClickable !== undefined) {\n    defaultProps.maskClickable = val.maskClickable;\n  }\n}","map":{"version":3,"sources":["E:/wcy/Github/fun-rec/codes/news_recsys/news_rec_web/my-app-ts/node_modules/antd-mobile/es/components/toast/methods.js"],"names":["React","createRef","forwardRef","useEffect","useImperativeHandle","useState","resolveContainer","ReactDOM","InternalToast","mergeProps","containers","unmount","container","unmountResult","unmountComponentAtNode","parentNode","removeChild","defaultProps","duration","position","maskClickable","show","p","props","content","timer","getContainer","document","body","createElement","bodyContainer","appendChild","clear","push","TempToast","_","ref","visible","setVisible","_a","afterClose","call","window","setTimeout","clearTimeout","close","Object","assign","render","current","pop","config","val","undefined"],"mappings":"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","sourcesContent":["import React, { createRef, forwardRef, useEffect, useImperativeHandle, useState } from 'react';\nimport { resolveContainer } from '../../utils/get-container';\nimport ReactDOM from 'react-dom';\nimport { InternalToast } from './toast';\nimport { mergeProps } from '../../utils/with-default-props';\nconst containers = [];\n\nfunction unmount(container) {\n  const unmountResult = ReactDOM.unmountComponentAtNode(container);\n\n  if (unmountResult && container.parentNode) {\n    container.parentNode.removeChild(container);\n  }\n}\n\nconst defaultProps = {\n  duration: 2000,\n  position: 'center',\n  maskClickable: true\n};\nexport function show(p) {\n  const props = mergeProps(defaultProps, typeof p === 'string' ? {\n    content: p\n  } : p);\n  let timer = 0;\n  const {\n    getContainer = () => document.body\n  } = props;\n  const container = document.createElement('div');\n  const bodyContainer = resolveContainer(getContainer);\n  bodyContainer.appendChild(container);\n  clear();\n  containers.push(container);\n  const TempToast = forwardRef((_, ref) => {\n    const [visible, setVisible] = useState(true);\n    useEffect(() => {\n      return () => {\n        var _a;\n\n        (_a = props.afterClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      };\n    }, []);\n    useEffect(() => {\n      if (props.duration === 0) {\n        return;\n      }\n\n      timer = window.setTimeout(() => {\n        setVisible(false);\n      }, props.duration);\n      return () => {\n        window.clearTimeout(timer);\n      };\n    }, []);\n    useImperativeHandle(ref, () => ({\n      close: () => setVisible(false)\n    }));\n    return React.createElement(InternalToast, Object.assign({}, props, {\n      getContainer: () => container,\n      visible: visible,\n      afterClose: () => {\n        unmount(container);\n      }\n    }));\n  });\n  const ref = createRef();\n  ReactDOM.render(React.createElement(TempToast, {\n    ref: ref\n  }), container);\n  return {\n    close: () => {\n      var _a;\n\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.close();\n    }\n  };\n}\nexport function clear() {\n  while (true) {\n    const container = containers.pop();\n    if (!container) break;\n    unmount(container);\n  }\n}\nexport function config(val) {\n  if (val.duration !== undefined) {\n    defaultProps.duration = val.duration;\n  }\n\n  if (val.position !== undefined) {\n    defaultProps.position = val.position;\n  }\n\n  if (val.maskClickable !== undefined) {\n    defaultProps.maskClickable = val.maskClickable;\n  }\n}"]},"metadata":{},"sourceType":"module"}